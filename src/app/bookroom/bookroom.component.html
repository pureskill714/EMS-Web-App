<app-header></app-header>

<div class="square-box">
    <!-- First Section: Header -->
    <div class="header">
        <div class="left">
            <h2>My Bookings</h2>
        </div>
        <div class="right">
            <button class="btn" [routerLink]="'/newbooking'">Make a New Booking</button>
        </div>
    </div>

    <!-- Second Section: Buttons -->
    <div class="buttons">
        <button class="btn" (click)="loadBookingList()">Upcoming</button>
        <button class="btn" (click)="loadPastBookings()">Past</button>
        <button class="btn" (click)="toggleCalendarView()">Calendar View</button>
    </div>

    <!-- Third Section: List of Bookings -->
    <div *ngIf="!showCalendarView && showBookingList && !showPastBookings" class="booking-list">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Meeting Room</th> <!-- Change 'Location' to 'Meeting Room' -->
                    <th>Time Slots</th>
                    <th>Purpose</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let booking of this.retrievedBookingInfos">
                    <td>{{ booking.date | date: 'yyyy-MM-dd' }}</td> <!-- Apply date pipe to format the date -->
                    <td>{{ booking.meetingRoom }}</td> <!-- Change 'location' to 'meetingRoom' -->
                    <td>
                        <ul>
                            <li *ngFor="let timeslot of booking.timeslots">{{ timeslot }}</li> <!-- Change 'timeSlots' to 'timeslots' -->
                        </ul>
                    </td>
                    <td>{{ booking.purpose }}</td>
                    <td>
                        <button class="btn">Cancel</button>
                    </td>
                </tr>
            </tbody>
        </table>
        
    </div>

    <!-- Fourth Section: Date Picker or Calendar View or Past View -->
    <div *ngIf="showPastBookings && !showBookingList && !showCalendarView" class="past-view">
        <!-- Include your past bookings component here -->
        <h1>Past Bookings View</h1>
    </div>

    <div *ngIf="showCalendarView && !showBookingList && !showPastBookings" class="date-picker">
        <!-- Include your calendar view component here -->
        <div class="dropdowns">
            <div class="dropdown">
                <label for="date">Select Date</label>
                <input type="date" id="date" name="date" [(ngModel)]="selectedDate" (change)="toggleCalendarView()">
            </div>
            <br><br>
            <!-- Add ngIf directive to conditionally show the table -->
            <div id="calendar" *ngIf="selectedDate">
                <table border="1">
                    <!-- Table Header Row -->
                    <thead>
                        <tr>
                            <!-- Empty cell for spacing -->
                            <th></th>
                            <!-- Header cells for columns A to T -->
                            <th>9:00</th>
                            <th>10:00</th>
                            <th>11:00</th>
                            <th>12:00</th>
                            <th>13:00</th>
                            <th>14:00</th>
                            <th>15:00</th>
                            <th>16:00</th>
                            <th>17:00</th>
                            <th>18:00</th>
                            <!-- Add headers for all 20 columns (A to T) -->
                            <!-- For brevity, only a few columns are shown -->
                        </tr>
                    </thead>
                    <!-- Table Body Rows -->
                    <tbody>
                        <!-- First Row -->
                        <tr>
                            <!-- Row header for Row 1 -->
                            <th>Meeting Room 1</th>
                            <!-- Cells for Row 1, Columns A to T -->
                            <td class="green-box"></td> <!-- For 9:00am-->
                            <td class="green-box"></td> <!-- For 9:30am-->
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="grey-box"></td>
                            <td class="grey-box"></td>
                            <td></td> <!-- For 6pm-->
                            <!-- Add cells for all 20 columns in Row 1 -->
                        </tr>
                        <!-- Second Row -->
                        <tr>
                            <!-- Row header for Row 2 -->
                            <th>Meeting Room 2</th>
                            <!-- Cells for Row 2, Columns A to T -->
                            <td></td> <!-- For 9am-->
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td> <!-- For 6pm-->
                            <!-- Add cells for all 20 columns in Row 2 -->
                        </tr>
                        <!-- Repeat the above rows for additional rows if needed -->
                    </tbody>
                </table>
                <div class="legend">
                    <div class="legend-item">
                        <div class="green-box-legend"></div>
                        <span>Available</span>
                    </div>
                    <div class="legend-item">
                        <div class="grey-box-legend"></div>
                        <span>Booked</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>